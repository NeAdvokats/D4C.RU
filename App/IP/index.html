<!DOCTYPE html>
<html lang="ru">
    <head>
        <link rel="stylesheet" href="../styles.css">
        <meta charset="UTF-8">
        <link href="https://fonts.googleapis.com/css2?family=Montserrat" rel="stylesheet">
        <title>D4C.RU v23.040.1</title>
    </head>
    <body>
        <header class="header-class">
            <nav class="header-nav">
                <ul class="nav-class">

                    <li>
                        <a href="../index.html" class="nav-link">Обход</a>
                    </li>

                    <li>
                        <a href="#" class="nav-link">IP Адрес</a>
                    </li>

                    <li>
                        <a href="../readme/index.html" class="nav-link">README</a>
                    </li>
                </ul>
            </nav>
        </header>
        <main class="main-class">
            <h1 class="main-catalog">Информация IP</h1>
            <p class="main-description">Здесь Вы можете посмотреть IP, Проверка блокировки, Драйвера для программы. Также подождите время пока проверка блокировки не дойдет до конца.</p>
            <div class="main-net">
                <h1 id="raw-content" class="main-ip">Загрузка...</h1>
                <p>Наведитесь чтобы посмотреть свой IP-Адрес</p>
            </div>
            <a class="main-button" onclick="checkDiscord()">Проверить</a>
            <span id="dc-result">discordapp.com : Неизвестно</span>
        </main> 
    </body>

    <script>
        const rawUrl = 'https://api.ipify.org?format=raw';
        fetch(rawUrl)
          .then(response => {
            if (!response.ok) throw new Error('Не удалось загрузить, очень тяжело...');
            return response.text();
          })
          .then(text => {
            document.getElementById('raw-content').textContent = text;
          })
          .catch(error => {
            document.getElementById('raw-content').textContent = 'Братан, не смог я.  ' + error.message;
          });

          async function checkDiscord() {
            const resultEl = document.getElementById('dc-result');
            resultEl.innerHTML = 'Проверяем cdn.discordapp.com...';
            
            try {
                const start = Date.now();
                await fetch('https://discordapp.com/', {method: 'HEAD', mode: 'no-cors'});
                const time = Date.now() - start;
                resultEl.innerHTML = `discordapp.com : Доступен (${time}мс)`;
            } catch {
                resultEl.innerHTML = 'discordapp.com : Заблокирован';
            }
            }
      </script>
</html>
